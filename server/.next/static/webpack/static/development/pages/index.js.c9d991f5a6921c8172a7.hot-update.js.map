{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.c9d991f5a6921c8172a7.hot-update.js","sources":["webpack:///./games/Balance_game.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as THREE from 'three'\r\n//import * as OBJLoader from 'three-obj-loader';\r\nimport { setParam } from \"../src/actions\";\r\n//OBJLoader(THREE);\r\n\r\n//require(\"/home/rehab/Documents/RehabRobot/server/games/sprite/crosshair.png\")\r\n//require(\"/home/rehab/Documents/RehabRobot/server/games/sprite/crosshair_yellow.png\" );\r\n\r\nclass Balance_game extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.start = this.start.bind(this)\r\n    this.stop = this.stop.bind(this)\r\n    this.animate = this.animate.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    const width = this.mount.clientWidth\r\n    const height = this.mount.clientHeight\r\n  \r\n    var scene = new THREE.Scene()\r\n    scene.background = new THREE.Color( 0x99ccff );\r\n    \r\n    var camera = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, -100, 500000);\r\n    camera.position.set( 0,0,5);\r\n    scene.add( camera );\r\n\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true })\r\n    renderer.setSize(width, height)\r\n\r\n    var columnMaterial = new THREE.MeshBasicMaterial( { color: 0xAFAFAF} );\r\n    var groundMaterial = new THREE.MeshBasicMaterial( { color: 0x137200} );\r\n    var characterMaterial = new THREE.MeshBasicMaterial( { color: 0x6400CF} );\r\n    var ballMaterial = new THREE.MeshBasicMaterial( { color: 0x00239B} );\r\n\r\n    var column = new THREE.Mesh( new THREE.BoxBufferGeometry( 50, 200, 10 ), columnMaterial );\r\n    column.position.set(0,-100,0)\r\n    scene.add(column)\r\n\r\n    var ground = new THREE.Mesh( new THREE.BoxBufferGeometry( 1000, 50, 10 ), groundMaterial );\r\n    ground.position.set(0,-175,0)\r\n    scene.add(ground)\r\n\r\n    var character = new THREE.Mesh(new THREE.CircleBufferGeometry( 25, 32 ), characterMaterial );\r\n    character.position.set(50,25,0)\r\n    scene.add(character)\r\n\r\n    var ball = new THREE.Mesh(new THREE.CircleBufferGeometry( 10, 32 ), ballMaterial );\r\n    ball.position.set(100 ,25,0)\r\n    scene.add(ball)\r\n\r\n    var spotLight1 = new THREE.SpotLight( 0xffffff, 1 );\r\n    spotLight1.position.set( -width/3, 200, 200 );\r\n\r\n    var light = new THREE.HemisphereLight( 0xffffff, 0xffffff, 1 );\r\n    scene.add( light );\r\n    \r\n    scene.add(spotLight1)\r\n    scene.add( camera );\r\n\r\n    var loader = new THREE.TextureLoader();\r\n\r\n    var material = new THREE.MeshLambertMaterial({\r\n      map: loader.load('/static/textures/column')\r\n    });\r\n\r\n    var geometry = new THREE.PlaneGeometry(100, 50);\r\n    // combine our image geometry and material into a mesh\r\n    var mesh = new THREE.Mesh(geometry, material);\r\n\r\n    scene.add(mesh)\r\n\r\n    this.scene = scene\r\n    this.camera = camera\r\n    this.renderer = renderer\r\n\r\n    this.character = character\r\n    this.x_prev = 0;\r\n    this.v_horizontal = 0;\r\n    this.v_verticle = 0;\r\n    this.ball = ball\r\n\r\n    this.mount.appendChild(this.renderer.domElement)\r\n    this.start()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.stop()\r\n    this.mount.removeChild(this.renderer.domElement)\r\n  }\r\n\r\n  start() {\r\n    if (!this.frameId) {\r\n      this.frameId = requestAnimationFrame(this.animate)\r\n    }\r\n  }\r\n\r\n  stop() {\r\n    cancelAnimationFrame(this.frameId)\r\n  }\r\n\r\n  animate() {\r\n\r\n    if(Math.abs(this.character.position.x)>40)\r\n    {\r\n      //ball should fall, game over\r\n      this.character.position.x += this.v_horizontal //player continues to move horizontally \r\n      this.v_verticle += 9.8*0.01; //accelerate down at  approximately g\r\n      if(this.character.position.y > -125) this.character.position.y -= this.v_verticle; //change player verticle position\r\n\r\n      console.log('fall')\r\n    }\r\n    else\r\n    {\r\n      //ball has not fallen, game still on\r\n      this.x_prev = this.character.position.x\r\n      this.character.position.x = this.props.x - this.props.xdes\r\n      this.ball.position.x = this.props.x_ball - this.props.xdes\r\n      this.v_horizontal = (this.character.x - this.x_prev)\r\n    }\r\n\r\n    this.renderScene()\r\n    this.frameId = window.requestAnimationFrame(this.animate)\r\n   \r\n  }\r\n\r\n  renderScene() {\r\n    this.renderer.render(this.scene, this.camera)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      \r\n      <div\r\n        style={{ width: '900px', height: '400px' }}\r\n        ref={(mount) => { this.mount = mount }}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  \r\n  //map state variables to the component's state \r\n  return {\r\n    x: state.x,\r\n    x_ball: state.x_ball,\r\n    xdes: state.xdes\r\n  }\r\n}\r\n\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {} //add importing action functions here\r\n)(Balance_game);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AACA;AALA;AAMA;AACA;;;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AADA;AAIA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AAEA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AApIA;AACA;AAsIA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAEA;AAAA;;;;A","sourceRoot":""}